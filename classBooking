--
-- PostgreSQL database dump
--

-- Dumped from database version 17.4 (Debian 17.4-1.pgdg120+2)
-- Dumped by pg_dump version 17.0

-- Started on 2025-06-22 07:33:57 +0630

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 4 (class 2615 OID 2200)
-- Name: public; Type: SCHEMA; Schema: -; Owner: pg_database_owner
--

CREATE SCHEMA public;


ALTER SCHEMA public OWNER TO pg_database_owner;

--
-- TOC entry 3422 (class 0 OID 0)
-- Dependencies: 4
-- Name: SCHEMA public; Type: COMMENT; Schema: -; Owner: pg_database_owner
--

COMMENT ON SCHEMA public IS 'standard public schema';


SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 218 (class 1259 OID 16386)
-- Name: bookings; Type: TABLE; Schema: public; Owner: classDev
--

CREATE TABLE public.bookings (
    id bigint NOT NULL,
    booking_time timestamp(6) without time zone NOT NULL,
    check_in_time timestamp(6) without time zone,
    created_at timestamp(6) without time zone,
    credits_deducted integer NOT NULL,
    status character varying(20) NOT NULL,
    updated_at timestamp(6) without time zone,
    class_id bigint NOT NULL,
    user_id bigint NOT NULL,
    user_package_id bigint NOT NULL,
    CONSTRAINT bookings_status_check CHECK (((status)::text = ANY ((ARRAY['CONFIRMED'::character varying, 'CANCELLED'::character varying, 'CHECKED_IN'::character varying])::text[])))
);


ALTER TABLE public.bookings OWNER TO "classDev";

--
-- TOC entry 217 (class 1259 OID 16385)
-- Name: bookings_id_seq; Type: SEQUENCE; Schema: public; Owner: classDev
--

ALTER TABLE public.bookings ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.bookings_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 220 (class 1259 OID 16393)
-- Name: classes; Type: TABLE; Schema: public; Owner: classDev
--

CREATE TABLE public.classes (
    id bigint NOT NULL,
    capacity integer NOT NULL,
    class_name character varying(255) NOT NULL,
    country_code character varying(3) NOT NULL,
    created_at timestamp(6) without time zone,
    description text,
    end_time timestamp(6) without time zone NOT NULL,
    instructor_name character varying(255),
    location character varying(255),
    required_credits integer NOT NULL,
    start_time timestamp(6) without time zone NOT NULL,
    updated_at timestamp(6) without time zone
);


ALTER TABLE public.classes OWNER TO "classDev";

--
-- TOC entry 219 (class 1259 OID 16392)
-- Name: classes_id_seq; Type: SEQUENCE; Schema: public; Owner: classDev
--

ALTER TABLE public.classes ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.classes_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 222 (class 1259 OID 16401)
-- Name: packages; Type: TABLE; Schema: public; Owner: classDev
--

CREATE TABLE public.packages (
    id bigint NOT NULL,
    country_code character varying(3) NOT NULL,
    created_at timestamp(6) without time zone,
    credits integer NOT NULL,
    description text,
    is_active boolean NOT NULL,
    name character varying(255) NOT NULL,
    price numeric(10,2) NOT NULL,
    updated_at timestamp(6) without time zone,
    validity_days integer NOT NULL
);


ALTER TABLE public.packages OWNER TO "classDev";

--
-- TOC entry 221 (class 1259 OID 16400)
-- Name: packages_id_seq; Type: SEQUENCE; Schema: public; Owner: classDev
--

ALTER TABLE public.packages ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.packages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 224 (class 1259 OID 16409)
-- Name: user_packages; Type: TABLE; Schema: public; Owner: classDev
--

CREATE TABLE public.user_packages (
    id bigint NOT NULL,
    country_code character varying(3) NOT NULL,
    created_at timestamp(6) without time zone,
    current_credits integer NOT NULL,
    expiry_date timestamp(6) without time zone NOT NULL,
    payment_ref character varying(255),
    purchase_date timestamp(6) without time zone NOT NULL,
    status character varying(20) NOT NULL,
    total_credits integer NOT NULL,
    updated_at timestamp(6) without time zone,
    package_id bigint NOT NULL,
    user_id bigint NOT NULL,
    CONSTRAINT user_packages_status_check CHECK (((status)::text = ANY ((ARRAY['ACTIVE'::character varying, 'EXPIRED'::character varying, 'DEPLETED'::character varying])::text[])))
);


ALTER TABLE public.user_packages OWNER TO "classDev";

--
-- TOC entry 223 (class 1259 OID 16408)
-- Name: user_packages_id_seq; Type: SEQUENCE; Schema: public; Owner: classDev
--

ALTER TABLE public.user_packages ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.user_packages_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 226 (class 1259 OID 16416)
-- Name: users; Type: TABLE; Schema: public; Owner: classDev
--

CREATE TABLE public.users (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    email character varying(255),
    is_email_verified boolean,
    name character varying(255),
    password character varying(255),
    reset_password_token character varying(255),
    updated_at timestamp(6) without time zone,
    verification_token character varying(255)
);


ALTER TABLE public.users OWNER TO "classDev";

--
-- TOC entry 225 (class 1259 OID 16415)
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: classDev
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 228 (class 1259 OID 16424)
-- Name: waitlists; Type: TABLE; Schema: public; Owner: classDev
--

CREATE TABLE public.waitlists (
    id bigint NOT NULL,
    created_at timestamp(6) without time zone,
    required_credits_at_waitlist integer NOT NULL,
    status character varying(30) NOT NULL,
    updated_at timestamp(6) without time zone,
    waitlist_time timestamp(6) without time zone NOT NULL,
    class_id bigint NOT NULL,
    user_id bigint NOT NULL,
    user_package_id bigint NOT NULL,
    CONSTRAINT waitlists_status_check CHECK (((status)::text = ANY ((ARRAY['WAITING'::character varying, 'BOOKED_FROM_WAITLIST'::character varying, 'CANCELLED'::character varying, 'CREDIT_REFUNDED'::character varying])::text[])))
);


ALTER TABLE public.waitlists OWNER TO "classDev";

--
-- TOC entry 227 (class 1259 OID 16423)
-- Name: waitlists_id_seq; Type: SEQUENCE; Schema: public; Owner: classDev
--

ALTER TABLE public.waitlists ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.waitlists_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3406 (class 0 OID 16386)
-- Dependencies: 218
-- Data for Name: bookings; Type: TABLE DATA; Schema: public; Owner: classDev
--

COPY public.bookings (id, booking_time, check_in_time, created_at, credits_deducted, status, updated_at, class_id, user_id, user_package_id) FROM stdin;
1	2025-06-22 07:04:03.213543	\N	2025-06-22 07:04:03.217392	3	CONFIRMED	2025-06-22 07:04:03.217415	1	1	1
3	2025-06-22 07:16:26.664718	\N	2025-06-22 07:16:26.66707	3	CONFIRMED	2025-06-22 07:16:26.667083	1	3	3
2	2025-06-22 07:06:49.924714	\N	2025-06-22 07:06:49.924975	3	CANCELLED	2025-06-22 07:16:26.676596	1	2	2
\.


--
-- TOC entry 3408 (class 0 OID 16393)
-- Dependencies: 220
-- Data for Name: classes; Type: TABLE DATA; Schema: public; Owner: classDev
--

COPY public.classes (id, capacity, class_name, country_code, created_at, description, end_time, instructor_name, location, required_credits, start_time, updated_at) FROM stdin;
1	2	English Class	SG	\N	\N	2025-07-22 04:57:02.550949	\N	\N	3	2025-06-24 04:57:02.550949	\N
\.


--
-- TOC entry 3410 (class 0 OID 16401)
-- Dependencies: 222
-- Data for Name: packages; Type: TABLE DATA; Schema: public; Owner: classDev
--

COPY public.packages (id, country_code, created_at, credits, description, is_active, name, price, updated_at, validity_days) FROM stdin;
1	SG	\N	4	\N	t	gold package	500.00	\N	30
2	SG	\N	5	\N	t	bronze package	300.00	\N	30
3	MM	\N	5	\N	t	gold package	400.00	\N	30
4	MM	\N	5	\N	t	bronze package	300.00	\N	30
\.


--
-- TOC entry 3412 (class 0 OID 16409)
-- Dependencies: 224
-- Data for Name: user_packages; Type: TABLE DATA; Schema: public; Owner: classDev
--

COPY public.user_packages (id, country_code, created_at, current_credits, expiry_date, payment_ref, purchase_date, status, total_credits, updated_at, package_id, user_id) FROM stdin;
1	SG	2025-06-22 04:57:02.550949	1	2025-07-22 04:57:02.548553	c1957f75-47dd-46b5-ab33-aa04a1ee95dd	2025-06-22 04:57:02.548548	ACTIVE	4	2025-06-22 07:04:03.238251	1	1
2	SG	2025-06-22 07:06:13.44389	5	2025-07-22 07:06:13.443508	6e005df8-e90f-4fa0-a2d3-1dc626a0f467	2025-06-22 07:06:13.443502	ACTIVE	5	2025-06-22 07:16:26.679015	2	2
3	SG	2025-06-22 07:09:13.257333	2	2025-07-22 07:09:13.256801	ae5c637b-46ac-4d85-b428-7e80b8694f97	2025-06-22 07:09:13.256795	ACTIVE	5	2025-06-22 07:16:26.68123	2	3
\.


--
-- TOC entry 3414 (class 0 OID 16416)
-- Dependencies: 226
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: classDev
--

COPY public.users (id, created_at, email, is_email_verified, name, password, reset_password_token, updated_at, verification_token) FROM stdin;
1	2025-06-22 04:46:32.993764	yewai.dev@gmail.com	t	YY	$2a$10$RT5lEsStgWUQFMz.9cKU..JgOUNVpFE5q40mUlHFavmuMDKsfxtzu	\N	2025-06-22 04:48:54.43233	\N
2	2025-06-22 04:51:27.1789	yewai.cs@gmail.com	t	Ye Wai	$2a$10$0O54PUMm9ElQ8rrIypBV2.TQ0/T6/um890Ms3TdJNgrC/v.jqXfH2	\N	2025-06-22 04:51:56.802121	\N
3	2025-06-22 07:07:20.597274	yewai@gmail.com	t	Wai	$2a$10$Og657zr7U8lz5qELjLjTtOigiGvDyE3EFp788G8m/PwrW4QeO0MFC	\N	2025-06-22 07:08:35.754414	\N
\.


--
-- TOC entry 3416 (class 0 OID 16424)
-- Dependencies: 228
-- Data for Name: waitlists; Type: TABLE DATA; Schema: public; Owner: classDev
--

COPY public.waitlists (id, created_at, required_credits_at_waitlist, status, updated_at, waitlist_time, class_id, user_id, user_package_id) FROM stdin;
1	2025-06-22 07:11:57.276128	3	BOOKED_FROM_WAITLIST	2025-06-22 07:16:26.680251	2025-06-22 07:11:57.273463	1	3	3
\.


--
-- TOC entry 3423 (class 0 OID 0)
-- Dependencies: 217
-- Name: bookings_id_seq; Type: SEQUENCE SET; Schema: public; Owner: classDev
--

SELECT pg_catalog.setval('public.bookings_id_seq', 3, true);


--
-- TOC entry 3424 (class 0 OID 0)
-- Dependencies: 219
-- Name: classes_id_seq; Type: SEQUENCE SET; Schema: public; Owner: classDev
--

SELECT pg_catalog.setval('public.classes_id_seq', 1, false);


--
-- TOC entry 3425 (class 0 OID 0)
-- Dependencies: 221
-- Name: packages_id_seq; Type: SEQUENCE SET; Schema: public; Owner: classDev
--

SELECT pg_catalog.setval('public.packages_id_seq', 4, true);


--
-- TOC entry 3426 (class 0 OID 0)
-- Dependencies: 223
-- Name: user_packages_id_seq; Type: SEQUENCE SET; Schema: public; Owner: classDev
--

SELECT pg_catalog.setval('public.user_packages_id_seq', 3, true);


--
-- TOC entry 3427 (class 0 OID 0)
-- Dependencies: 225
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: classDev
--

SELECT pg_catalog.setval('public.users_id_seq', 3, true);


--
-- TOC entry 3428 (class 0 OID 0)
-- Dependencies: 227
-- Name: waitlists_id_seq; Type: SEQUENCE SET; Schema: public; Owner: classDev
--

SELECT pg_catalog.setval('public.waitlists_id_seq', 1, true);


--
-- TOC entry 3239 (class 2606 OID 16391)
-- Name: bookings bookings_pkey; Type: CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.bookings
    ADD CONSTRAINT bookings_pkey PRIMARY KEY (id);


--
-- TOC entry 3241 (class 2606 OID 16399)
-- Name: classes classes_pkey; Type: CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.classes
    ADD CONSTRAINT classes_pkey PRIMARY KEY (id);


--
-- TOC entry 3243 (class 2606 OID 16407)
-- Name: packages packages_pkey; Type: CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.packages
    ADD CONSTRAINT packages_pkey PRIMARY KEY (id);


--
-- TOC entry 3247 (class 2606 OID 16431)
-- Name: users uk6dotkott2kjsp8vw4d0m25fb7; Type: CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT uk6dotkott2kjsp8vw4d0m25fb7 UNIQUE (email);


--
-- TOC entry 3245 (class 2606 OID 16414)
-- Name: user_packages user_packages_pkey; Type: CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.user_packages
    ADD CONSTRAINT user_packages_pkey PRIMARY KEY (id);


--
-- TOC entry 3249 (class 2606 OID 16422)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 3251 (class 2606 OID 16429)
-- Name: waitlists waitlists_pkey; Type: CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.waitlists
    ADD CONSTRAINT waitlists_pkey PRIMARY KEY (id);


--
-- TOC entry 3255 (class 2606 OID 16447)
-- Name: user_packages fkamf4ragc34vb3il9wxrwjxw7b; Type: FK CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.user_packages
    ADD CONSTRAINT fkamf4ragc34vb3il9wxrwjxw7b FOREIGN KEY (package_id) REFERENCES public.packages(id);


--
-- TOC entry 3257 (class 2606 OID 16462)
-- Name: waitlists fkapgrrvgbi28civjdxv78e7mea; Type: FK CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.waitlists
    ADD CONSTRAINT fkapgrrvgbi28civjdxv78e7mea FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 3252 (class 2606 OID 16437)
-- Name: bookings fkeyog2oic85xg7hsu2je2lx3s6; Type: FK CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.bookings
    ADD CONSTRAINT fkeyog2oic85xg7hsu2je2lx3s6 FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 3253 (class 2606 OID 16442)
-- Name: bookings fkk891lpubajvnghgyb9wqwgmbu; Type: FK CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.bookings
    ADD CONSTRAINT fkk891lpubajvnghgyb9wqwgmbu FOREIGN KEY (user_package_id) REFERENCES public.user_packages(id);


--
-- TOC entry 3258 (class 2606 OID 16467)
-- Name: waitlists fkkdwrlbr3hhl7klip9of9nm7os; Type: FK CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.waitlists
    ADD CONSTRAINT fkkdwrlbr3hhl7klip9of9nm7os FOREIGN KEY (user_package_id) REFERENCES public.user_packages(id);


--
-- TOC entry 3256 (class 2606 OID 16452)
-- Name: user_packages fklhj6dofmpikc4fp9nf3ciksdq; Type: FK CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.user_packages
    ADD CONSTRAINT fklhj6dofmpikc4fp9nf3ciksdq FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 3259 (class 2606 OID 16457)
-- Name: waitlists fkmby7qw1pmwq9qykmx4g75mm8m; Type: FK CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.waitlists
    ADD CONSTRAINT fkmby7qw1pmwq9qykmx4g75mm8m FOREIGN KEY (class_id) REFERENCES public.classes(id);


--
-- TOC entry 3254 (class 2606 OID 16432)
-- Name: bookings fkvips8gvyih0oew57y8b7pq9x; Type: FK CONSTRAINT; Schema: public; Owner: classDev
--

ALTER TABLE ONLY public.bookings
    ADD CONSTRAINT fkvips8gvyih0oew57y8b7pq9x FOREIGN KEY (class_id) REFERENCES public.classes(id);


-- Completed on 2025-06-22 07:33:57 +0630

--
-- PostgreSQL database dump complete
--

